!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.MessageFactory=t()}}(function(){var t;return function e(t,n,r){function a(u,i){if(!n[u]){if(!t[u]){var f="function"==typeof require&&require;if(!i&&f)return f(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return a(n?n:e)},s,s.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)a(r[u]);return a}({1:[function(t,e,n){"use strict";(function(){var t={pack:function(t,e,n,r,a,o){Array.isArray(n)||(n=[n]);for(var u=0;a>u;u++)e[t](r+u,n[u],o)},unpack:function(t,e,n,r,a){for(var o=[],u=0;r>u;u++)o.push(e[t](n+u,a));return o}},n={A:{length:1,pack:function(e,n,r,a,o){t.pack("setInt8",e,n,r,a,o)},unpack:function(e,n,r,a){return t.unpack("getInt8",e,n,r,a)}},x:{length:1,pack:function(t,e,n,r,a){for(var o=0;r>o;o++)t.setUint8(n+o,0)},unpack:function(t,e,n,r){for(var a=[],o=0;n>o;o++)a.push(0);return a}},c:{length:1,pack:function(t,e,n,r,a,o){Array.isArray(n)||(n=[n]);for(var u=0;a>u;u++)e.setUint8(r+u,n[u].charCodeAt(0))},unpack:function(t,e,n,r,a){for(var o=[],u=0;r>u;u++)o.push(String.fromCharCode(e.getUint8(n+u)));return o}},b:{length:1,pack:function(e,n,r,a,o){t.pack("setInt8",e,n,r,a,o)},unpack:function(e,n,r,a){return t.unpack("getInt8",e,n,r,a)}},B:{length:1,pack:function(e,n,r,a,o){t.pack("setUint8",e,n,r,a,o)},unpack:function(e,n,r,a){return t.unpack("getUint8",e,n,r,a)}},h:{length:2,pack:function(e,n,r,a,o){t.pack("setInt16",e,n,r,a,o)},unpack:function(e,n,r,a){return t.unpack("getInt16",e,n,r,a)}},H:{length:2,pack:function(e,n,r,a,o){t.pack("setUint16",e,n,r,a,o)},unpack:function(e,n,r,a){return t.unpack("getUint16",e,n,r,a)}},i:{length:4,pack:function(e,n,r,a,o){t.pack("setInt32",e,n,r,a,o)},unpack:function(e,n,r,a){return t.unpack("getInt32",e,n,r,a)}},I:{length:4,pack:function(e,n,r,a,o){t.pack("setUint32",e,n,r,a,o)},unpack:function(e,n,r,a){return t.unpack("getUint32",e,n,r,a)}},l:{length:4,pack:function(e,n,r,a,o){t.pack("setInt32",e,n,r,a,o)},unpack:function(e,n,r,a){return t.unpack("getInt32",e,n,r,a)}},L:{length:4,pack:function(e,n,r,a,o){t.pack("setUint32",e,n,r,a,o)},unpack:function(e,n,r,a){return t.unpack("getUint32",e,n,r,a)}},s:{length:1,pack:function(t,e,n,r,a){for(var o=new String(e[0]),u=0;r>u;u++){var i=0;u<o.length&&(i=o.charCodeAt(u)),t.setUint8(n+u,i)}},unpack:function(t,e,n,r){for(var a=[],o=0;n>o;o++)a.push(String.fromCharCode(t.getUint8(e+o)));return[a.join("")]}},f:{length:4,pack:function(e,n,r,a,o){t.pack("setFloat32",e,n,r,a,o)},unpack:function(e,n,r,a){return t.unpack("getFloat32",e,n,r,a)}},d:{length:8,pack:function(e,n,r,a,o){t.pack("setFloat64",e,n,r,a,o)},unpack:function(e,n,r,a){return t.unpack("getFloat64",e,n,r,a)}}},r="(\\d+)?([AxcbBhHsfdiIlL])",a=function(t){for(var e,a=new RegExp(r,"g"),o=0;e=a.exec(t);)o+=(void 0==e[1]||""==e[1]?1:parseInt(e[1]))*n[e[2]].length;return o},o=function(t,e,o){var u="<"==t.charAt(0);o=o?o:0;for(var i,f,c,s=new ArrayBuffer(a(t)),l=new DataView(s),p=new RegExp(r,"g"),h=0;i=p.exec(t);){if(void 0==n[i[2]])throw new Error("Unknown format type");if(f=void 0==i[1]||""==i[1]?1:parseInt(i[1]),c=n[i[2]].length,o+f*c>s.length)return;var d=e.slice(h,h+1);n[i[2]].pack(l,d,o,f,u),o+=f*c,h+=1}return s},u=function(t,e,a){for(var o,u,i,f="<"==t.charAt(0),a=a?a:0,c=[],s=new RegExp(r,"g"),l=new DataView(e);o=s.exec(t);){if(void 0==n[o[2]])throw new Error("Unknown format type");if(u=void 0==o[1]||""==o[1]?1:parseInt(o[1]),i=n[o[2]].length,a+u*i>e.length)return;c=c.concat(n[o[2]].unpack(l,a,u,f)),a+=u*i}return c},i={pack:o,unpack:u,calcLength:a,Pack:o,Unpack:u,CalcLength:a};"undefined"!=typeof e&&e.exports?e.exports=i:this.struct=i}).call(void 0)},{}],2:[function(e,n,r){(function(e){"use strict";!function(a){function o(t){for(var e,n,r=[],a=0,o=t.length;o>a;)e=t.charCodeAt(a++),e>=55296&&56319>=e&&o>a?(n=t.charCodeAt(a++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),a--)):r.push(e);return r}function u(t){for(var e,n=t.length,r=-1,a="";++r<n;)e=t[r],e>65535&&(e-=65536,a+=m(e>>>10&1023|55296),e=56320|1023&e),a+=m(e);return a}function i(t,e){return m(t>>e&63|128)}function f(t){if(0==(4294967168&t))return m(t);var e="";return 0==(4294965248&t)?e=m(t>>6&31|192):0==(4294901760&t)?(e=m(t>>12&15|224),e+=i(t,6)):0==(4292870144&t)&&(e=m(t>>18&7|240),e+=i(t,12),e+=i(t,6)),e+=m(63&t|128)}function c(t){for(var e,n=o(t),r=n.length,a=-1,u="";++a<r;)e=n[a],u+=f(e);return u}function s(){if(k>=y)throw Error("Invalid byte index");var t=255&v[k];if(k++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function l(){var t,e,n,r,a;if(k>y)throw Error("Invalid byte index");if(k==y)return!1;if(t=255&v[k],k++,0==(128&t))return t;if(192==(224&t)){var e=s();if(a=(31&t)<<6|e,a>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=s(),n=s(),a=(15&t)<<12|e<<6|n,a>=2048)return a;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=s(),n=s(),r=s(),a=(15&t)<<18|e<<12|n<<6|r,a>=65536&&1114111>=a))return a;throw Error("Invalid UTF-8 detected")}function p(t){v=o(t),y=v.length,k=0;for(var e,n=[];(e=l())!==!1;)n.push(e);return u(n)}var h="object"==typeof r&&r,d="object"==typeof n&&n&&n.exports==h&&n,g="object"==typeof e&&e;(g.global===g||g.window===g)&&(a=g);var v,y,k,m=String.fromCharCode,b={version:"2.0.0",encode:c,decode:p};if("function"==typeof t&&"object"==typeof t.amd&&t.amd)t(function(){return b});else if(h&&!h.nodeType)if(d)d.exports=b;else{var w={},j=w.hasOwnProperty;for(var I in b)j.call(b,I)&&(h[I]=b[I])}else a.utf8=b}(void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("../bower_components/jspack-arraybuffer/struct.js"),i=r(u),f=t("./message.js"),c=r(f),s=t("./string-format.js"),l=r(s),p=t("../bower_components/utf8/utf8.js"),h=r(p),d=(Number.MAX_SAFE_INTEGER>Math.pow(2,64)-1?Number.MAX_SAFE_INTEGER:Math.pow(2,64)-1,{bool:"?","byte":"b",ubyte:"B","char":"c","short":"h",ushort:"H","int":"i",uint:"I",int64:"q",uint64:"Q","float":"f","double":"d"}),g=function(t){var e=Math.ceil(Math.log(t,2)/8);if(1>=e)return"B";if(2===e)return"H";if(4>=e)return"I";if(8>=e)return"Q";throw"Unable to represent number $number in packed structure"},v=function(){function t(e){a(this,t);var n=Object.keys(e).sort();this.msgClassesByName={},this.msgClassesById={},this.bytesNeededForId=Math.ceil(Math.log(n.length+1,2)/8),this.idBinaryFormat=g(n.length),n.forEach(function(t,n){var r={},a={};if(e[t].enums)for(var o in e[t].enums){var u=e[t].enums[o];r[o]={},a[o]={};for(var i in u){var f=u[i];r[o][i]=f,a[o][f]=i}}var s=Object.create(c["default"].prototype,{name:{value:t,writable:!1},binaryFormat:{value:this.getBinaryFormat(e[t]),writable:!1},format:{value:e[t].format,writable:!1},schema:{value:e,writable:!1},id:{value:n+1,writable:!1},enums:{value:r,writable:!1},reverseEnums:{value:a,writable:!1},data:{value:{},writable:!0}});this.msgClassesById[n+1]=s,this.msgClassesByName[t]=s}.bind(this))}return o(t,[{key:"getBinaryFormat",value:function(t){var e=Object.keys(t.format).sort(),n="!";return n+=this.idBinaryFormat,e.forEach(function(e){if("string"===t.format[e])n+="I{}s";else if("enum"===t.format[e])try{n+=g(Object.keys(t.format[e]).length)}catch(r){throw"Enum field can contain the maximum number MAX_SUPPORTED_NUMBER possible values."}else try{n+=d[t.format[e]]}catch(r){throw"Unknown field type msgSchema.format[field]."}}),n}},{key:"getByName",value:function(t){return this.msgClassesByName[t]}},{key:"getById",value:function(t){return this.msgClassesById[t]}},{key:"get",value:function(t){return!isNaN(parseInt(t))&&isFinite(t)?this.getById(t):this.getByName(t)}},{key:"unpackMessage",value:function(t){for(var e=new DataView(t),n=e["getUint"+8*this.bytesNeededForId](0),r=this.getById(n),a=Object.create(r),o=Object.keys(r.format).sort(),u=[],f=[],c=0;c<o.length;c++){var s=o[c],p=r.format[s];if("string"===p){var d=this.bytesNeededForId+c,g=e.getUint32(d);u.push(g),f.push(c)}}var v=l["default"](r.binaryFormat,u),y=i["default"].unpack(v,t);y.shift();for(var c=0;c<f.length;c++)y.splice(f[c],1);for(var c=0;c<o.length;c++){var s=o[c],p=r.format[s];a.data[s]=y[c],"string"===p&&(a.data[s]=h["default"].decode(a.data[s])),"enum"===p&&(a.data[s]=r.reverseEnums[s][a.data[s]])}return a}},{key:"unpackMessages",value:function(t){for(var e=[];t.byteLength;){var n=this.unpackMessage(t);t=t.slice(n.getBinaryLength()),e.push(n)}return e}},{key:"packMessages",value:function(t){for(var e=[],n=t.length,r=0,a=0,o=0;n>o;o++){var u=t[o].pack();e.push(u),r+=u.byteLength}for(var i=new Uint8Array(r),o=0;n>o;o++)i.set(new Uint8Array(e[o]),a),a+=e[o].byteLength;return i.buffer}}]),t}();n["default"]=v,e.exports=n["default"]},{"../bower_components/jspack-arraybuffer/struct.js":1,"../bower_components/utf8/utf8.js":2,"./message.js":4,"./string-format.js":5}],4:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("../bower_components/jspack-arraybuffer/struct.js"),i=r(u),f=t("../bower_components/utf8/utf8.js"),c=r(f),s=t("./string-format.js"),l=r(s),p=function(){function t(){a(this,t)}return o(t,[{key:"pack",value:function(){for(var t=Object.getPrototypeOf(this),e=t.format,n=t.binaryFormat,r=Object.keys(e).sort(),a=[],o=[t.id],u=0;u<r.length;u++){var f=r[u],s=e[f],p=this.data[f];"enum"===s?p=t.enums[f][p]:"string"===s&&(p=c["default"].encode(p),o.push(p.length),a.push(p.length)),o.push(p)}return n=l["default"](n,a),i["default"].pack(n,o)}},{key:"getBinaryLength",value:function(){for(var t=Object.getPrototypeOf(this),e=t.format,n=Object.keys(e).sort(),r=t.binaryFormat,a=[],o=0;o<n.length;o++){var u=n[o];"string"===e[u]&&a.push(this.data[u].length)}return r=l["default"](r,a),i["default"].calcLength(r)}}]),t}();n["default"]=p,e.exports=n["default"]},{"../bower_components/jspack-arraybuffer/struct.js":1,"../bower_components/utf8/utf8.js":2,"./string-format.js":5}],5:[function(t,e,n){"use strict";function r(t,e){var n=0;return t.replace(/\{\}/g,function(){return e[n]})}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r,e.exports=n["default"]},{}],6:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var a=t("./js/message-factory.js"),o=r(a);e.exports=o["default"]},{"./js/message-factory.js":3}]},{},[6])(6)});